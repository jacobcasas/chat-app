(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{124:function(e,a,t){},125:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(19),c=t.n(s),l=t(9),m=t(27),o=t.n(m),i=t(53),u=t(10),d=t(54),p=t.n(d),g=function(){var e=Object(n.useState)(""),a=Object(u.a)(e,2),t=a[0],s=a[1],c=Object(n.useState)(""),l=Object(u.a)(c,2),m=l[0],d=l[1],g=Object(n.useState)(""),v=Object(u.a)(g,2),h=v[0],f=v[1],E=function(){var e=Object(i.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={"Project-ID":"81a00ed1-3199-4142-bc72-a97fedc04a2e","User-Name":t,"User-Secret":m},e.prev=2,e.next=5,p.a.get("https://api.chatengine.io/chats",{headers:n});case 5:localStorage.setItem("username",t),localStorage.setItem("password",m),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),f("Incorrect username or password");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"form"},r.a.createElement("h1",{className:"title"},"Chat Application"),r.a.createElement("form",{onSubmit:E},r.a.createElement("input",{type:"text",value:t,onChange:function(e){return s(e.target.value)},className:"input",placeholder:"Username",required:!0}),r.a.createElement("input",{type:"password",value:m,onChange:function(e){return d(e.target.value)},className:"input",placeholder:"Password",required:!0}),r.a.createElement("div",{align:"center"},r.a.createElement("button",{type:"submit",className:"button"},r.a.createElement("span",null,"Submit"))),r.a.createElement("h2",{className:"error"},h))))},v=t(127),h=t(128),f=function(e){var a=Object(n.useState)(""),t=Object(u.a)(a,2),s=t[0],c=t[1],m=e.chatId,o=e.creds,i=function(e){e.preventDefault();var a=s.trim();a.length>0&&Object(l.r)(o,m,{text:a}),c("")};return r.a.createElement("form",{className:"message-form",onSubmit:i},r.a.createElement("input",{className:"message-input",placeholder:"Send a message ...",value:s,onChange:function(a){c(a.target.value),Object(l.n)(e,m)},onSubmit:i}),r.a.createElement("label",{htmlFor:"upload-button"},r.a.createElement("span",{className:"image-button"},r.a.createElement(v.a,{className:"picture-icon"}))),r.a.createElement("input",{type:"file",multiple:!1,id:"upload-button",style:{display:"none"},onChange:function(e){Object(l.r)(o,m,{files:e.target.files,text:""})}}),r.a.createElement("button",{type:"submit",className:"send-button"},r.a.createElement(h.a,{className:"send-icon"})))},E=function(e){var a,t=e.message;return(null===t||void 0===t||null===(a=t.attachments)||void 0===a?void 0:a.length)>0?r.a.createElement("img",{src:t.attachments[0].file,alt:"message-attachment",className:"message-image",style:{float:"right"}}):r.a.createElement("div",{className:"message",style:{float:"right",marginRight:"18px",color:"white",backgroundColor:"#3B2A50"}},t.text)},b=function(e){var a,t,n=e.lastMessage,s=e.message,c=!n||n.sender.username!==s.sender.username;return r.a.createElement("div",{className:"message-row"},c&&r.a.createElement("div",{className:"message-avatar",style:{backgroundImage:"url(".concat(null===s||void 0===s||null===(a=s.sender)||void 0===a?void 0:a.avatar,")")}}),(null===s||void 0===s||null===(t=s.attachments)||void 0===t?void 0:t.length)>0?r.a.createElement("img",{src:s.attachments[0].file,alt:"message-attachment",className:"message-image",style:{marginLeft:c?"4px":"48px"}}):r.a.createElement("div",{className:"message",style:{float:"left",backgroundColor:"#CABCDC",marginLeft:c?"4px":"48px"}},s.text))},N=function(e){var a=e.chats,t=e.activeChat,n=e.userName,s=e.messages,c=a&&a[t];return c?r.a.createElement("div",{className:"chat-feed"},r.a.createElement("div",{className:"chat-title-container"},r.a.createElement("div",{className:"chat-title"},null===c||void 0===c?void 0:c.title),r.a.createElement("div",{className:"chat-subtitle"},c.people.map((function(e){return" ".concat(e.person.username)})))),function(){var e=Object.keys(s);return e.map((function(a,t){var l=s[a],m=0===t?null:e[t-1],o=n===l.sender.username;return r.a.createElement("div",{key:"msg_".concat(t),style:{width:"100%"}},r.a.createElement("div",{className:"message-block"},o?r.a.createElement(E,{message:l}):r.a.createElement(b,{message:l,lastMessage:s[m]})),r.a.createElement("div",{className:"read-receipts",style:{marginRight:o?"18px":"0px",marginLeft:o?"0px":"68px"}},function(e,a){c.people.map((function(t,n){var s;return t.last_read===e.id&&r.a.createElement("div",{key:"read_".concat(n),className:"read-receipts",style:{float:a?"right":"left",backgroundImage:"url(".concat(null===t||void 0===t||null===(s=t.person)||void 0===s?void 0:s.avatar,")")}})}))}(l,o)))}))}(),r.a.createElement("div",{style:{height:"100px"}}),r.a.createElement("div",{className:"message-form-container"},r.a.createElement(f,Object.assign({},e,{chatId:t})))):"Loading..."},y=(t(124),function(){return localStorage.getItem("username")?r.a.createElement(l.d,{height:"100vh",projectID:"81a00ed1-3199-4142-bc72-a97fedc04a2e",userName:localStorage.getItem("username"),userSecret:localStorage.getItem("password"),renderChatFeed:function(e){return r.a.createElement(N,e)}}):r.a.createElement(g,null)});c.a.render(r.a.createElement(y,null),document.getElementById("root"))},56:function(e,a,t){e.exports=t(125)}},[[56,1,2]]]);
//# sourceMappingURL=main.397fcb5f.chunk.js.map